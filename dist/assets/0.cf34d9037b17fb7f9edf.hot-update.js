webpackHotUpdate(0,{

/***/ 294:
/***/ function(module, exports, __webpack_require__) {

	eval("/* WEBPACK VAR INJECTION */(function(module) {/* REACT HOT LOADER */ if (true) { (function () { var ReactHotAPI = __webpack_require__(77), RootInstanceProvider = __webpack_require__(85), ReactMount = __webpack_require__(87), React = __webpack_require__(155); module.makeHot = module.hot.data ? module.hot.data.makeHot : ReactHotAPI(function () { return RootInstanceProvider.getRootInstances(ReactMount); }, React); })(); } try { (function () {\n\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(155);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = __webpack_require__(208);\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _reactAddonsUpdate = __webpack_require__(295);\n\nvar _reactAddonsUpdate2 = _interopRequireDefault(_reactAddonsUpdate);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n__webpack_require__(297);\n__webpack_require__(301);\n\nvar COL_NUM = 3;\nvar COL_WIDTH = 360;\nvar LOAD_MORE_BTN_HEIGHT = 30;\n\nvar imgBoxPropsArr = __webpack_require__(303);\nvar _iteratorNormalCompletion = true;\nvar _didIteratorError = false;\nvar _iteratorError = undefined;\n\ntry {\n  for (var _iterator = imgBoxPropsArr[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n    var item = _step.value;\n\n    item.src = __webpack_require__(304)(\"./\" + item.fileName);\n  }\n\n  /**\n   * 图片元素组件\n   */\n} catch (err) {\n  _didIteratorError = true;\n  _iteratorError = err;\n} finally {\n  try {\n    if (!_iteratorNormalCompletion && _iterator.return) {\n      _iterator.return();\n    }\n  } finally {\n    if (_didIteratorError) {\n      throw _iteratorError;\n    }\n  }\n}\n\nvar ImgBox = function (_React$Component) {\n  _inherits(ImgBox, _React$Component);\n\n  function ImgBox() {\n    _classCallCheck(this, ImgBox);\n\n    return _possibleConstructorReturn(this, (ImgBox.__proto__ || Object.getPrototypeOf(ImgBox)).apply(this, arguments));\n  }\n\n  _createClass(ImgBox, [{\n    key: 'shouldComponentUpdate',\n\n    /**\n     * 禁止已经加载的组件在加载更多的时候更新\n     */\n    value: function shouldComponentUpdate() {\n      return false;\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      // console.log(this.props.src+' render!');\n      return _react2.default.createElement('img', {\n        className: ['img-box', 'waiting'].join(' '),\n        src: this.props.src + '?' + Date.now(),\n        title: this.props.title,\n        alt: this.props.title,\n        style: this.props.style,\n        onLoad: this.props.resolvePms\n      });\n    }\n  }]);\n\n  return ImgBox;\n}(_react2.default.Component);\n\nvar LoadMoreBtn = function (_React$Component2) {\n  _inherits(LoadMoreBtn, _React$Component2);\n\n  function LoadMoreBtn() {\n    _classCallCheck(this, LoadMoreBtn);\n\n    return _possibleConstructorReturn(this, (LoadMoreBtn.__proto__ || Object.getPrototypeOf(LoadMoreBtn)).apply(this, arguments));\n  }\n\n  _createClass(LoadMoreBtn, [{\n    key: 'render',\n    value: function render() {\n      return _react2.default.createElement(\n        'div',\n        {\n          className: 'load-more-btn',\n          onClick: this.props.loadMoreImgs\n        },\n        '点击加载更多'\n      );\n    }\n  }]);\n\n  return LoadMoreBtn;\n}(_react2.default.Component);\n\n/**\n * 主应用\n */\n\n\nvar AppComponent = function (_React$Component3) {\n  _inherits(AppComponent, _React$Component3);\n\n  function AppComponent() {\n    _classCallCheck(this, AppComponent);\n\n    var _this3 = _possibleConstructorReturn(this, (AppComponent.__proto__ || Object.getPrototypeOf(AppComponent)).call(this));\n\n    _this3.colHeightArr = [0, 0, 0];\n    _this3.state = {\n      imgBoxPropsArr: [],\n      isLoading: false\n    };\n    // this.isLoading = false;\n    _this3.size = 0;\n    return _this3;\n  }\n\n  /**\n   * 生成闭包函数加载更多图片\n   */\n\n\n  _createClass(AppComponent, [{\n    key: 'genLoadMoreImgsFn',\n    value: function genLoadMoreImgsFn() {\n      var _this4 = this;\n\n      /**\n       * 加载更多，也就是在容器组件的 state 的 imgBoxPropsArr 数组添加元素以触发容器更新\n       */\n      return function (event) {\n        if (!_this4.state.isLoading) {\n          var newState = (0, _reactAddonsUpdate2.default)(_this4.state, {\n            imgBoxPropsArr: {\n              $push: imgBoxPropsArr\n            }\n          });\n          _this4.setState(newState);\n        }\n      };\n    }\n\n    /**\n     * 容器要挂载时若 state 的 imgBoxPropsArr 数组为空需要加载一次\n     */\n\n  }, {\n    key: 'componentWillMount',\n    value: function componentWillMount() {\n      if (this.state.imgBoxPropsArr.length === 0) {\n        this.genLoadMoreImgsFn()();\n      }\n    }\n\n    /**\n     * 将一个 imgboxDOMArr 数组中的元素在容器中以瀑布流布局\n     * 说明： 按顺序插入最矮的一列\n     */\n\n  }, {\n    key: 'waterflow',\n    value: function waterflow(imgboxDOMArr) {\n      var container = _reactDom2.default.findDOMNode(this.refs['img-box-container']);\n      var h = void 0,\n          minH = void 0,\n          minHIdx = void 0,\n          maxH = void 0;\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = imgboxDOMArr[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var item = _step2.value;\n\n          h = item.offsetHeight;\n          minH = Math.min.apply(null, this.colHeightArr);\n          minHIdx = this.colHeightArr.indexOf(minH);\n          this.colHeightArr[minHIdx] += h;\n          maxH = Math.max.apply(null, this.colHeightArr);\n          item.style.top = minH + 'px';\n          item.style.left = minHIdx * COL_WIDTH + 'px';\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      container.style.height = maxH + LOAD_MORE_BTN_HEIGHT + 10 + 'px';\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this5 = this;\n\n      var imgBoxPropsArr = this.state.imgBoxPropsArr;\n\n      var imgBoxArr = [];\n      var pmsArr = imgBoxPropsArr.map(function (item, index) {\n        return new Promise(function (resolve, reject) {\n          // 用 promise 来封装图片的 load\n          imgBoxArr.push(_react2.default.createElement(ImgBox, {\n            key: index,\n            ref: 'imgBox' + index,\n            classList: [],\n            src: item.src,\n            resolvePms: function resolvePms(event) {\n              console.log(item.src + ' load!');\n              resolve(event.target); // load 完成时 resolve 这个 dom 本身\n            }\n          }));\n        });\n      });\n      pmsArr = pmsArr.slice(this.size); // 除去已加载的\n      // this.isLoading = true;\n      this.setState({ isLoading: true });\n      console.log('Current size: ' + this.size + ', waiting ' + pmsArr.length + ' promises...');\n      Promise.all(pmsArr).then(function (imgboxDOMArr) {\n        _this5.waterflow(imgboxDOMArr);\n        imgboxDOMArr.forEach(function (item, index) {\n          item.classList.remove('waiting');\n        });\n        _this5.size += imgboxDOMArr.length;\n        // this.isLoading = false;\n        _this5.setState({ isLoading: false });\n        // alert('OK!');\n      });\n      return _react2.default.createElement(\n        'div',\n        { className: 'img-box-container', ref: 'img-box-container' },\n        imgBoxArr,\n        _react2.default.createElement(LoadMoreBtn, {\n          loadMoreImgs: this.genLoadMoreImgsFn()\n        })\n      );\n    }\n  }]);\n\n  return AppComponent;\n}(_react2.default.Component);\n\nAppComponent.defaultProps = {};\n\nexports.default = AppComponent;\n\n/* REACT HOT LOADER */ }).call(this); } finally { if (true) { (function () { var foundReactClasses = module.hot.data && module.hot.data.foundReactClasses || false; if (module.exports && module.makeHot) { var makeExportsHot = __webpack_require__(314); if (makeExportsHot(module, __webpack_require__(155))) { foundReactClasses = true; } var shouldAcceptModule = true && foundReactClasses; if (shouldAcceptModule) { module.hot.accept(function (err) { if (err) { console.error(\"Cannot not apply hot update to \" + \"Main.js\" + \": \" + err.message); } }); } } module.hot.dispose(function (data) { data.makeHot = module.makeHot; data.foundReactClasses = foundReactClasses; }); })(); } }\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(4)(module)))//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9NYWluLmpzPzdjZDQiXSwibmFtZXMiOlsicmVxdWlyZSIsIkNPTF9OVU0iLCJDT0xfV0lEVEgiLCJMT0FEX01PUkVfQlROX0hFSUdIVCIsImltZ0JveFByb3BzQXJyIiwiaXRlbSIsInNyYyIsImZpbGVOYW1lIiwiSW1nQm94Iiwiam9pbiIsInByb3BzIiwiRGF0ZSIsIm5vdyIsInRpdGxlIiwic3R5bGUiLCJyZXNvbHZlUG1zIiwiQ29tcG9uZW50IiwiTG9hZE1vcmVCdG4iLCJsb2FkTW9yZUltZ3MiLCJBcHBDb21wb25lbnQiLCJjb2xIZWlnaHRBcnIiLCJzdGF0ZSIsImlzTG9hZGluZyIsInNpemUiLCJldmVudCIsIm5ld1N0YXRlIiwiJHB1c2giLCJzZXRTdGF0ZSIsImxlbmd0aCIsImdlbkxvYWRNb3JlSW1nc0ZuIiwiaW1nYm94RE9NQXJyIiwiY29udGFpbmVyIiwiZmluZERPTU5vZGUiLCJyZWZzIiwiaCIsIm1pbkgiLCJtaW5ISWR4IiwibWF4SCIsIm9mZnNldEhlaWdodCIsIk1hdGgiLCJtaW4iLCJhcHBseSIsImluZGV4T2YiLCJtYXgiLCJ0b3AiLCJsZWZ0IiwiaGVpZ2h0IiwiaW1nQm94QXJyIiwicG1zQXJyIiwibWFwIiwiaW5kZXgiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInB1c2giLCJjb25zb2xlIiwibG9nIiwidGFyZ2V0Iiwic2xpY2UiLCJhbGwiLCJ0aGVuIiwid2F0ZXJmbG93IiwiZm9yRWFjaCIsImNsYXNzTGlzdCIsInJlbW92ZSIsImRlZmF1bHRQcm9wcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUdBOzs7O0FBQ0E7Ozs7QUFDQTs7Ozs7Ozs7Ozs7O0FBTEEsbUJBQUFBLENBQVEsR0FBUjtBQUNBLG1CQUFBQSxDQUFRLEdBQVI7O0FBTUEsSUFBTUMsVUFBVSxDQUFoQjtBQUNBLElBQU1DLFlBQVksR0FBbEI7QUFDQSxJQUFNQyx1QkFBdUIsRUFBN0I7O0FB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QUF5QixVQUFDOUIsWUFBRCxFQUFrQjtBQUN6QyxlQUFLK0IsU0FBTCxDQUFlL0IsWUFBZjtBQUNBQSxxQkFBYWdDLE9BQWIsQ0FBcUIsVUFBQ3pELElBQUQsRUFBTzZDLEtBQVAsRUFBaUI7QUFDcEM3QyxlQUFLMEQsU0FBTCxDQUFlQyxNQUFmLENBQXNCLFNBQXRCO0FBQ0QsU0FGRDtBQUdBLGVBQUt6QyxJQUFMLElBQWFPLGFBQWFGLE1BQTFCO0FBQ0E7QUFDQSxlQUFLRCxRQUFMLENBQWMsRUFBRUwsV0FBVyxLQUFiLEVBQWQ7QUFDQTtBQUNELE9BVEQ7QUFVQSxhQUNFO0FBQUE7QUFBQSxVQUFLLFdBQVUsbUJBQWYsRUFBbUMsS0FBSSxtQkFBdkM7QUFDR3lCLGlCQURIO0FBRUUsc0NBQUMsV0FBRDtBQUNFLHdCQUFjLEtBQUtsQixpQkFBTDtBQURoQjtBQUZGLE9BREY7QUFRRDs7OztFQXBHd0IsZ0JBQU1iLFM7O0FBeUdqQ0csYUFBYThDLFlBQWIsR0FBNEIsRUFBNUI7O2tCQUllOUMsWSIsImZpbGUiOiIyOTQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJyZXF1aXJlKCdub3JtYWxpemUuY3NzL25vcm1hbGl6ZS5jc3MnKTtcbnJlcXVpcmUoJ3N0eWxlcy9BcHAuc2NzcycpO1xuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFJlYWN0RE9NIGZyb20gJ3JlYWN0LWRvbSc7XG5pbXBvcnQgdXBkYXRlIGZyb20gJ3JlYWN0LWFkZG9ucy11cGRhdGUnO1xuXG5jb25zdCBDT0xfTlVNID0gMztcbmNvbnN0IENPTF9XSURUSCA9IDM2MDtcbmNvbnN0IExPQURfTU9SRV9CVE5fSEVJR0hUID0gMzA7XG5cbmxldCBpbWdCb3hQcm9wc0FyciA9IHJlcXVpcmUoJy4uL2RhdGEvaW1hZ2VEYXRhcy5qc29uJyk7XG5mb3IgKGxldCBpdGVtIG9mIGltZ0JveFByb3BzQXJyKSB7XG4gIGl0ZW0uc3JjID0gcmVxdWlyZSgnLi4vaW1hZ2VzLycgKyBpdGVtLmZpbGVOYW1lKTtcbn1cblxuXG4vKipcbiAqIOWbvueJh+WFg+e0oOe7hOS7tlxuICovXG5jbGFzcyBJbWdCb3ggZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAvKipcbiAgICog56aB5q2i5bey57uP5Yqg6L2955qE57uE5Lu25Zyo5Yqg6L295pu05aSa55qE5pe25YCZ5pu05pawXG4gICAqL1xuICBzaG91bGRDb21wb25lbnRVcGRhdGUoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIC8vIGNvbnNvbGUubG9nKHRoaXMucHJvcHMuc3JjKycgcmVuZGVyIScpO1xuICAgIHJldHVybiAoXG4gICAgICA8aW1nXG4gICAgICAgIGNsYXNzTmFtZT17WydpbWctYm94JywgJ3dhaXRpbmcnXS5qb2luKCcgJyl9XG4gICAgICAgIHNyYz17dGhpcy5wcm9wcy5zcmMgKyAnPycgKyBEYXRlLm5vdygpfVxuICAgICAgICB0aXRsZT17dGhpcy5wcm9wcy50aXRsZX1cbiAgICAgICAgYWx0PXt0aGlzLnByb3BzLnRpdGxlfVxuICAgICAgICBzdHlsZT17dGhpcy5wcm9wcy5zdHlsZX1cbiAgICAgICAgb25Mb2FkPXt0aGlzLnByb3BzLnJlc29sdmVQbXN9XG4gICAgICAvPlxuICAgICk7XG4gIH1cbn1cblxuY2xhc3MgTG9hZE1vcmVCdG4gZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXZcbiAgICAgICAgY2xhc3NOYW1lPXsnbG9hZC1tb3JlLWJ0bid9XG4gICAgICAgIG9uQ2xpY2s9e3RoaXMucHJvcHMubG9hZE1vcmVJbWdzfVxuICAgICAgPlxuICAgICAgICDngrnlh7vliqDovb3mm7TlpJpcbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbn1cblxuLyoqXG4gKiDkuLvlupTnlKhcbiAqL1xuY2xhc3MgQXBwQ29tcG9uZW50IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmNvbEhlaWdodEFyciA9IFswLCAwLCAwXTtcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgaW1nQm94UHJvcHNBcnI6IFtdLFxuICAgICAgaXNMb2FkaW5nOiBmYWxzZVxuICAgIH07XG4gICAgLy8gdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICB0aGlzLnNpemUgPSAwO1xuICB9XG5cbiAgLyoqXG4gICAqIOeUn+aIkOmXreWMheWHveaVsOWKoOi9veabtOWkmuWbvueJh1xuICAgKi9cbiAgZ2VuTG9hZE1vcmVJbWdzRm4oKSB7XG4gICAgLyoqXG4gICAgICog5Yqg6L295pu05aSa77yM5Lmf5bCx5piv5Zyo5a655Zmo57uE5Lu255qEIHN0YXRlIOeahCBpbWdCb3hQcm9wc0FyciDmlbDnu4Tmt7vliqDlhYPntKDku6Xop6blj5Hlrrnlmajmm7TmlrBcbiAgICAgKi9cbiAgICByZXR1cm4gKGV2ZW50KSA9PiB7XG4gICAgICBpZiAoIXRoaXMuc3RhdGUuaXNMb2FkaW5nKSB7XG4gICAgICAgIGxldCBuZXdTdGF0ZSA9IHVwZGF0ZSh0aGlzLnN0YXRlLCB7XG4gICAgICAgICAgaW1nQm94UHJvcHNBcnI6IHtcbiAgICAgICAgICAgICRwdXNoOiBpbWdCb3hQcm9wc0FyclxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUobmV3U3RhdGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDlrrnlmajopoHmjILovb3ml7boi6Ugc3RhdGUg55qEIGltZ0JveFByb3BzQXJyIOaVsOe7hOS4uuepuumcgOimgeWKoOi9veS4gOasoVxuICAgKi9cbiAgY29tcG9uZW50V2lsbE1vdW50KCkge1xuICAgIGlmICh0aGlzLnN0YXRlLmltZ0JveFByb3BzQXJyLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhpcy5nZW5Mb2FkTW9yZUltZ3NGbigpKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOWwhuS4gOS4qiBpbWdib3hET01BcnIg5pWw57uE5Lit55qE5YWD57Sg5Zyo5a655Zmo5Lit5Lul54CR5biD5rWB5biD5bGAXG4gICAqIOivtOaYju+8miDmjInpobrluo/mj5LlhaXmnIDnn67nmoTkuIDliJdcbiAgICovXG4gIHdhdGVyZmxvdyhpbWdib3hET01BcnIpIHtcbiAgICBsZXQgY29udGFpbmVyID0gUmVhY3RET00uZmluZERPTU5vZGUodGhpcy5yZWZzWydpbWctYm94LWNvbnRhaW5lciddKTtcbiAgICBsZXQgaCwgbWluSCwgbWluSElkeCwgbWF4SDtcbiAgICBmb3IgKGxldCBpdGVtIG9mIGltZ2JveERPTUFycikge1xuICAgICAgaCA9IGl0ZW0ub2Zmc2V0SGVpZ2h0O1xuICAgICAgbWluSCA9IE1hdGgubWluLmFwcGx5KG51bGwsIHRoaXMuY29sSGVpZ2h0QXJyKTtcbiAgICAgIG1pbkhJZHggPSB0aGlzLmNvbEhlaWdodEFyci5pbmRleE9mKG1pbkgpO1xuICAgICAgdGhpcy5jb2xIZWlnaHRBcnJbbWluSElkeF0gKz0gaDtcbiAgICAgIG1heEggPSBNYXRoLm1heC5hcHBseShudWxsLCB0aGlzLmNvbEhlaWdodEFycik7XG4gICAgICBpdGVtLnN0eWxlLnRvcCA9IG1pbkggKyAncHgnO1xuICAgICAgaXRlbS5zdHlsZS5sZWZ0ID0gbWluSElkeCAqIENPTF9XSURUSCArICdweCc7XG4gICAgfVxuICAgIGNvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSBtYXhIICsgTE9BRF9NT1JFX0JUTl9IRUlHSFQgKyAxMCArICdweCc7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgbGV0IHsgaW1nQm94UHJvcHNBcnIgfSA9IHRoaXMuc3RhdGU7XG4gICAgbGV0IGltZ0JveEFyciA9IFtdO1xuICAgIGxldCBwbXNBcnIgPSBpbWdCb3hQcm9wc0Fyci5tYXAoKGl0ZW0sIGluZGV4KSA9PiB7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7IC8vIOeUqCBwcm9taXNlIOadpeWwgeijheWbvueJh+eahCBsb2FkXG4gICAgICAgIGltZ0JveEFyci5wdXNoKFxuICAgICAgICAgIDxJbWdCb3hcbiAgICAgICAgICBrZXk9e2luZGV4fVxuICAgICAgICAgIHJlZj17J2ltZ0JveCcraW5kZXh9XG4gICAgICAgICAgY2xhc3NMaXN0PXtbXX1cbiAgICAgICAgICBzcmM9e2l0ZW0uc3JjfVxuICAgICAgICAgIHJlc29sdmVQbXM9eyhldmVudCk9PntcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGl0ZW0uc3JjICsgJyBsb2FkIScpO1xuICAgICAgICAgICAgcmVzb2x2ZShldmVudC50YXJnZXQpOyAvLyBsb2FkIOWujOaIkOaXtiByZXNvbHZlIOi/meS4qiBkb20g5pys6LqrXG4gICAgICAgICAgfX1cbiAgICAgICAgICA+PC9JbWdCb3g+XG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICBwbXNBcnIgPSBwbXNBcnIuc2xpY2UodGhpcy5zaXplKTsgLy8g6Zmk5Y675bey5Yqg6L2955qEXG4gICAgLy8gdGhpcy5pc0xvYWRpbmcgPSB0cnVlO1xuICAgIHRoaXMuc2V0U3RhdGUoeyBpc0xvYWRpbmc6IHRydWUgfSk7XG4gICAgY29uc29sZS5sb2coYEN1cnJlbnQgc2l6ZTogJHt0aGlzLnNpemV9LCB3YWl0aW5nICR7cG1zQXJyLmxlbmd0aH0gcHJvbWlzZXMuLi5gKTtcbiAgICBQcm9taXNlLmFsbChwbXNBcnIpLnRoZW4oKGltZ2JveERPTUFycikgPT4ge1xuICAgICAgdGhpcy53YXRlcmZsb3coaW1nYm94RE9NQXJyKTtcbiAgICAgIGltZ2JveERPTUFyci5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xuICAgICAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ3dhaXRpbmcnKTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5zaXplICs9IGltZ2JveERPTUFyci5sZW5ndGg7XG4gICAgICAvLyB0aGlzLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7IGlzTG9hZGluZzogZmFsc2UgfSk7XG4gICAgICAvLyBhbGVydCgnT0shJyk7XG4gICAgfSlcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9J2ltZy1ib3gtY29udGFpbmVyJyByZWY9J2ltZy1ib3gtY29udGFpbmVyJz5cbiAgICAgICAge2ltZ0JveEFycn1cbiAgICAgICAgPExvYWRNb3JlQnRuXG4gICAgICAgICAgbG9hZE1vcmVJbWdzPXt0aGlzLmdlbkxvYWRNb3JlSW1nc0ZuKCl9XG4gICAgICAgID48L0xvYWRNb3JlQnRuPlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxuXG5cbn1cblxuQXBwQ29tcG9uZW50LmRlZmF1bHRQcm9wcyA9IHtcbn07XG5cblxuZXhwb3J0IGRlZmF1bHQgQXBwQ29tcG9uZW50O1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvY29tcG9uZW50cy9NYWluLmpzXG4gKiovIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ }

})