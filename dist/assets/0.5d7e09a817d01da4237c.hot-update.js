webpackHotUpdate(0,{

/***/ 294:
/***/ function(module, exports, __webpack_require__) {

	eval("/* WEBPACK VAR INJECTION */(function(module) {/* REACT HOT LOADER */ if (true) { (function () { var ReactHotAPI = __webpack_require__(77), RootInstanceProvider = __webpack_require__(85), ReactMount = __webpack_require__(87), React = __webpack_require__(155); module.makeHot = module.hot.data ? module.hot.data.makeHot : ReactHotAPI(function () { return RootInstanceProvider.getRootInstances(ReactMount); }, React); })(); } try { (function () {\n\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(155);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = __webpack_require__(208);\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _reactAddonsUpdate = __webpack_require__(295);\n\nvar _reactAddonsUpdate2 = _interopRequireDefault(_reactAddonsUpdate);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n__webpack_require__(297);\n__webpack_require__(301);\n\nvar COL_NUM = 3;\nvar COL_WIDTH = 360;\nvar LOAD_MORE_BTN_HEIGHT = 30;\n\nvar imgBoxPropsArr = __webpack_require__(303);\nvar _iteratorNormalCompletion = true;\nvar _didIteratorError = false;\nvar _iteratorError = undefined;\n\ntry {\n  for (var _iterator = imgBoxPropsArr[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n    var item = _step.value;\n\n    item.src = __webpack_require__(304)(\"./\" + item.fileName);\n  }\n\n  /**\n   * 图片元素组件\n   */\n} catch (err) {\n  _didIteratorError = true;\n  _iteratorError = err;\n} finally {\n  try {\n    if (!_iteratorNormalCompletion && _iterator.return) {\n      _iterator.return();\n    }\n  } finally {\n    if (_didIteratorError) {\n      throw _iteratorError;\n    }\n  }\n}\n\nvar ImgBox = function (_React$Component) {\n  _inherits(ImgBox, _React$Component);\n\n  function ImgBox() {\n    _classCallCheck(this, ImgBox);\n\n    return _possibleConstructorReturn(this, (ImgBox.__proto__ || Object.getPrototypeOf(ImgBox)).apply(this, arguments));\n  }\n\n  _createClass(ImgBox, [{\n    key: 'shouldComponentUpdate',\n\n    /**\n     * 禁止已经加载的组件在加载更多的时候更新\n     */\n    value: function shouldComponentUpdate() {\n      return false;\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      // console.log(this.props.src+' render!');\n      return _react2.default.createElement('img', {\n        className: ['img-box', 'waiting'].join(' '),\n        src: this.props.src + '?' + Date.now(),\n        title: this.props.title,\n        alt: this.props.title,\n        style: this.props.style,\n        onLoad: this.props.resolvePms\n      });\n    }\n  }]);\n\n  return ImgBox;\n}(_react2.default.Component);\n\nvar LoadMoreBtn = function (_React$Component2) {\n  _inherits(LoadMoreBtn, _React$Component2);\n\n  function LoadMoreBtn() {\n    _classCallCheck(this, LoadMoreBtn);\n\n    return _possibleConstructorReturn(this, (LoadMoreBtn.__proto__ || Object.getPrototypeOf(LoadMoreBtn)).apply(this, arguments));\n  }\n\n  _createClass(LoadMoreBtn, [{\n    key: 'render',\n    value: function render() {\n      return _react2.default.createElement(\n        'div',\n        {\n          className: 'load-more-btn',\n          onClick: this.props.loadMoreImgs\n        },\n        '点击加载更多'\n      );\n    }\n  }]);\n\n  return LoadMoreBtn;\n}(_react2.default.Component);\n\n/**\n * 主应用\n */\n\n\nvar AppComponent = function (_React$Component3) {\n  _inherits(AppComponent, _React$Component3);\n\n  function AppComponent() {\n    _classCallCheck(this, AppComponent);\n\n    var _this3 = _possibleConstructorReturn(this, (AppComponent.__proto__ || Object.getPrototypeOf(AppComponent)).call(this));\n\n    _this3.colHeightArr = [0, 0, 0];\n    _this3.state = {\n      imgBoxPropsArr: [],\n      isLoading: false\n    };\n    // this.isLoading = false;\n    _this3.size = 0;\n    return _this3;\n  }\n\n  /**\n   * 生成闭包函数加载更多图片\n   */\n\n\n  _createClass(AppComponent, [{\n    key: 'genLoadMoreImgsFn',\n    value: function genLoadMoreImgsFn() {\n      var _this4 = this;\n\n      /**\n       * 加载更多，也就是在容器组件的 state 的 imgBoxPropsArr 数组添加元素以触发容器更新\n       */\n      return function (event) {\n        if (!_this4.state.isLoading) {\n          var newState = (0, _reactAddonsUpdate2.default)(_this4.state, {\n            imgBoxPropsArr: {\n              $push: imgBoxPropsArr\n            }\n          });\n          _this4.setState(newState);\n        }\n      };\n    }\n\n    /**\n     * 容器要挂载时若 state 的 imgBoxPropsArr 数组为空需要加载一次\n     */\n\n  }, {\n    key: 'componentWillMount',\n    value: function componentWillMount() {\n      if (this.state.imgBoxPropsArr.length === 0) {\n        this.genLoadMoreImgsFn()();\n      }\n    }\n\n    /**\n     * 将一个 imgboxDOMArr 数组中的元素在容器中以瀑布流布局\n     * 说明： 按顺序插入最矮的一列\n     */\n\n  }, {\n    key: 'waterflow',\n    value: function waterflow(imgboxDOMArr) {\n      var container = _reactDom2.default.findDOMNode(this.refs['img-box-container']);\n      var h = void 0,\n          minH = void 0,\n          minHIdx = void 0,\n          maxH = void 0;\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = imgboxDOMArr[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var item = _step2.value;\n\n          h = item.offsetHeight;\n          minH = Math.min.apply(null, this.colHeightArr);\n          minHIdx = this.colHeightArr.indexOf(minH);\n          this.colHeightArr[minHIdx] += h;\n          maxH = Math.max.apply(null, this.colHeightArr);\n          item.style.top = minH + 'px';\n          item.style.left = minHIdx * COL_WIDTH + 'px';\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      container.style.height = maxH + LOAD_MORE_BTN_HEIGHT + 10 + 'px';\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this5 = this;\n\n      var imgBoxPropsArr = this.state.imgBoxPropsArr;\n\n      var imgBoxArr = [];\n      var pmsArr = imgBoxPropsArr.map(function (item, index) {\n        return new Promise(function (resolve, reject) {\n          // 用 promise 来封装图片的 load\n          imgBoxArr.push(_react2.default.createElement(ImgBox, {\n            key: index,\n            ref: 'imgBox' + index,\n            classList: [],\n            src: item.src,\n            resolvePms: function resolvePms(event) {\n              console.log(item.src + ' load!');\n              resolve(event.target); // load 完成时 resolve 这个 dom 本身\n            }\n          }));\n        });\n      });\n      pmsArr = pmsArr.slice(this.size); // 除去已加载的\n      // this.isLoading = true;\n      this.setState((0, _reactAddonsUpdate2.default)(this.state, {\n        isLoading: { $set: true }\n      }));\n      console.log('Current size: ' + this.size + ', waiting ' + pmsArr.length + ' promises...');\n      Promise.all(pmsArr).then(function (imgboxDOMArr) {\n        _this5.waterflow(imgboxDOMArr);\n        imgboxDOMArr.forEach(function (item, index) {\n          item.classList.remove('waiting');\n        });\n        _this5.size += imgboxDOMArr.length;\n        // this.isLoading = false;\n        _this5.setState((0, _reactAddonsUpdate2.default)(_this5.state, {\n          isLoading: { $set: false }\n        }));\n        // alert('OK!');\n      });\n      return _react2.default.createElement(\n        'div',\n        { className: 'img-box-container', ref: 'img-box-container' },\n        imgBoxArr,\n        _react2.default.createElement(LoadMoreBtn, {\n          loadMoreImgs: this.genLoadMoreImgsFn()\n        })\n      );\n    }\n  }]);\n\n  return AppComponent;\n}(_react2.default.Component);\n\nAppComponent.defaultProps = {};\n\nexports.default = AppComponent;\n\n/* REACT HOT LOADER */ }).call(this); } finally { if (true) { (function () { var foundReactClasses = module.hot.data && module.hot.data.foundReactClasses || false; if (module.exports && module.makeHot) { var makeExportsHot = __webpack_require__(314); if (makeExportsHot(module, __webpack_require__(155))) { foundReactClasses = true; } var shouldAcceptModule = true && foundReactClasses; if (shouldAcceptModule) { module.hot.accept(function (err) { if (err) { console.error(\"Cannot not apply hot update to \" + \"Main.js\" + \": \" + err.message); } }); } } module.hot.dispose(function (data) { data.makeHot = module.makeHot; data.foundReactClasses = foundReactClasses; }); })(); } }\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(4)(module)))//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9NYWluLmpzPzdjZDQiXSwibmFtZXMiOlsicmVxdWlyZSIsIkNPTF9OVU0iLCJDT0xfV0lEVEgiLCJMT0FEX01PUkVfQlROX0hFSUdIVCIsImltZ0JveFByb3BzQXJyIiwiaXRlbSIsInNyYyIsImZpbGVOYW1lIiwiSW1nQm94Iiwiam9pbiIsInByb3BzIiwiRGF0ZSIsIm5vdyIsInRpdGxlIiwic3R5bGUiLCJyZXNvbHZlUG1zIiwiQ29tcG9uZW50IiwiTG9hZE1vcmVCdG4iLCJsb2FkTW9yZUltZ3MiLCJBcHBDb21wb25lbnQiLCJjb2xIZWlnaHRBcnIiLCJzdGF0ZSIsImlzTG9hZGluZyIsInNpemUiLCJldmVudCIsIm5ld1N0YXRlIiwiJHB1c2giLCJzZXRTdGF0ZSIsImxlbmd0aCIsImdlbkxvYWRNb3JlSW1nc0ZuIiwiaW1nYm94RE9NQXJyIiwiY29udGFpbmVyIiwiZmluZERPTU5vZGUiLCJyZWZzIiwiaCIsIm1pbkgiLCJtaW5ISWR4IiwibWF4SCIsIm9mZnNldEhlaWdodCIsIk1hdGgiLCJtaW4iLCJhcHBseSIsImluZGV4T2YiLCJtYXgiLCJ0b3AiLCJsZWZ0IiwiaGVpZ2h0IiwiaW1nQm94QXJyIiwicG1zQXJyIiwibWFwIiwiaW5kZXgiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInB1c2giLCJjb25zb2xlIiwibG9nIiwidGFyZ2V0Iiwic2xpY2UiLCIkc2V0IiwiYWxsIiwidGhlbiIsIndhdGVyZmxvdyIsImZvckVhY2giLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJkZWZhdWx0UHJvcHMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFHQTs7OztBQUNBOzs7O0FBQ0E7Ozs7Ozs7Ozs7OztBQUxBLG1CQUFBQSxDQUFRLEdBQVI7QUFDQSxtQkFBQUEsQ0FBUSxHQUFSOztBQU1BLElBQU1DLFVBQVUsQ0FBaEI7QUFDQSxJQUFNQyxZQUFZLEdBQWxCO0FBQ0EsSUFBTUMsdUJBQXVCLEVB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QUFPcEIsTUFBMUQ7QUFDQXVCLGNBQVFTLEdBQVIsQ0FBWVosTUFBWixFQUFvQmEsSUFBcEIsQ0FBeUIsVUFBQy9CLFlBQUQsRUFBa0I7QUFDekMsZUFBS2dDLFNBQUwsQ0FBZWhDLFlBQWY7QUFDQUEscUJBQWFpQyxPQUFiLENBQXFCLFVBQUMxRCxJQUFELEVBQU82QyxLQUFQLEVBQWlCO0FBQ3BDN0MsZUFBSzJELFNBQUwsQ0FBZUMsTUFBZixDQUFzQixTQUF0QjtBQUNELFNBRkQ7QUFHQSxlQUFLMUMsSUFBTCxJQUFhTyxhQUFhRixNQUExQjtBQUNBO0FBQ0EsZUFBS0QsUUFBTCxDQUFjLGlDQUFPLE9BQUtOLEtBQVosRUFBbUI7QUFDL0JDLHFCQUFXLEVBQUVxQyxNQUFNLEtBQVI7QUFEb0IsU0FBbkIsQ0FBZDtBQUdBO0FBQ0QsT0FYRDtBQVlBLGFBQ0U7QUFBQTtBQUFBLFVBQUssV0FBVSxtQkFBZixFQUFtQyxLQUFJLG1CQUF2QztBQUNHWixpQkFESDtBQUVFLHNDQUFDLFdBQUQ7QUFDRSx3QkFBYyxLQUFLbEIsaUJBQUw7QUFEaEI7QUFGRixPQURGO0FBUUQ7Ozs7RUF4R3dCLGdCQUFNYixTOztBQTZHakNHLGFBQWErQyxZQUFiLEdBQTRCLEVBQTVCOztrQkFJZS9DLFkiLCJmaWxlIjoiMjk0LmpzIiwic291cmNlc0NvbnRlbnQiOlsicmVxdWlyZSgnbm9ybWFsaXplLmNzcy9ub3JtYWxpemUuY3NzJyk7XG5yZXF1aXJlKCdzdHlsZXMvQXBwLnNjc3MnKTtcblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20nO1xuaW1wb3J0IHVwZGF0ZSBmcm9tICdyZWFjdC1hZGRvbnMtdXBkYXRlJztcblxuY29uc3QgQ09MX05VTSA9IDM7XG5jb25zdCBDT0xfV0lEVEggPSAzNjA7XG5jb25zdCBMT0FEX01PUkVfQlROX0hFSUdIVCA9IDMwO1xuXG5sZXQgaW1nQm94UHJvcHNBcnIgPSByZXF1aXJlKCcuLi9kYXRhL2ltYWdlRGF0YXMuanNvbicpO1xuZm9yIChsZXQgaXRlbSBvZiBpbWdCb3hQcm9wc0Fycikge1xuICBpdGVtLnNyYyA9IHJlcXVpcmUoJy4uL2ltYWdlcy8nICsgaXRlbS5maWxlTmFtZSk7XG59XG5cblxuLyoqXG4gKiDlm77niYflhYPntKDnu4Tku7ZcbiAqL1xuY2xhc3MgSW1nQm94IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgLyoqXG4gICAqIOemgeatouW3sue7j+WKoOi9veeahOe7hOS7tuWcqOWKoOi9veabtOWkmueahOaXtuWAmeabtOaWsFxuICAgKi9cbiAgc2hvdWxkQ29tcG9uZW50VXBkYXRlKCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnByb3BzLnNyYysnIHJlbmRlciEnKTtcbiAgICByZXR1cm4gKFxuICAgICAgPGltZ1xuICAgICAgICBjbGFzc05hbWU9e1snaW1nLWJveCcsICd3YWl0aW5nJ10uam9pbignICcpfVxuICAgICAgICBzcmM9e3RoaXMucHJvcHMuc3JjICsgJz8nICsgRGF0ZS5ub3coKX1cbiAgICAgICAgdGl0bGU9e3RoaXMucHJvcHMudGl0bGV9XG4gICAgICAgIGFsdD17dGhpcy5wcm9wcy50aXRsZX1cbiAgICAgICAgc3R5bGU9e3RoaXMucHJvcHMuc3R5bGV9XG4gICAgICAgIG9uTG9hZD17dGhpcy5wcm9wcy5yZXNvbHZlUG1zfVxuICAgICAgLz5cbiAgICApO1xuICB9XG59XG5cbmNsYXNzIExvYWRNb3JlQnRuIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgcmVuZGVyKCkge1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2XG4gICAgICAgIGNsYXNzTmFtZT17J2xvYWQtbW9yZS1idG4nfVxuICAgICAgICBvbkNsaWNrPXt0aGlzLnByb3BzLmxvYWRNb3JlSW1nc31cbiAgICAgID5cbiAgICAgICAg54K55Ye75Yqg6L295pu05aSaXG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG59XG5cbi8qKlxuICog5Li75bqU55SoXG4gKi9cbmNsYXNzIEFwcENvbXBvbmVudCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5jb2xIZWlnaHRBcnIgPSBbMCwgMCwgMF07XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGltZ0JveFByb3BzQXJyOiBbXSxcbiAgICAgIGlzTG9hZGluZzogZmFsc2VcbiAgICB9O1xuICAgIC8vIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgdGhpcy5zaXplID0gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiDnlJ/miJDpl63ljIXlh73mlbDliqDovb3mm7TlpJrlm77niYdcbiAgICovXG4gIGdlbkxvYWRNb3JlSW1nc0ZuKCkge1xuICAgIC8qKlxuICAgICAqIOWKoOi9veabtOWkmu+8jOS5n+WwseaYr+WcqOWuueWZqOe7hOS7tueahCBzdGF0ZSDnmoQgaW1nQm94UHJvcHNBcnIg5pWw57uE5re75Yqg5YWD57Sg5Lul6Kem5Y+R5a655Zmo5pu05pawXG4gICAgICovXG4gICAgcmV0dXJuIChldmVudCkgPT4ge1xuICAgICAgaWYgKCF0aGlzLnN0YXRlLmlzTG9hZGluZykge1xuICAgICAgICBsZXQgbmV3U3RhdGUgPSB1cGRhdGUodGhpcy5zdGF0ZSwge1xuICAgICAgICAgIGltZ0JveFByb3BzQXJyOiB7XG4gICAgICAgICAgICAkcHVzaDogaW1nQm94UHJvcHNBcnJcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnNldFN0YXRlKG5ld1N0YXRlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5a655Zmo6KaB5oyC6L295pe26IulIHN0YXRlIOeahCBpbWdCb3hQcm9wc0FyciDmlbDnu4TkuLrnqbrpnIDopoHliqDovb3kuIDmrKFcbiAgICovXG4gIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICBpZiAodGhpcy5zdGF0ZS5pbWdCb3hQcm9wc0Fyci5sZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMuZ2VuTG9hZE1vcmVJbWdzRm4oKSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDlsIbkuIDkuKogaW1nYm94RE9NQXJyIOaVsOe7hOS4reeahOWFg+e0oOWcqOWuueWZqOS4reS7peeAkeW4g+a1geW4g+WxgFxuICAgKiDor7TmmI7vvJog5oyJ6aG65bqP5o+S5YWl5pyA55+u55qE5LiA5YiXXG4gICAqL1xuICB3YXRlcmZsb3coaW1nYm94RE9NQXJyKSB7XG4gICAgbGV0IGNvbnRhaW5lciA9IFJlYWN0RE9NLmZpbmRET01Ob2RlKHRoaXMucmVmc1snaW1nLWJveC1jb250YWluZXInXSk7XG4gICAgbGV0IGgsIG1pbkgsIG1pbkhJZHgsIG1heEg7XG4gICAgZm9yIChsZXQgaXRlbSBvZiBpbWdib3hET01BcnIpIHtcbiAgICAgIGggPSBpdGVtLm9mZnNldEhlaWdodDtcbiAgICAgIG1pbkggPSBNYXRoLm1pbi5hcHBseShudWxsLCB0aGlzLmNvbEhlaWdodEFycik7XG4gICAgICBtaW5ISWR4ID0gdGhpcy5jb2xIZWlnaHRBcnIuaW5kZXhPZihtaW5IKTtcbiAgICAgIHRoaXMuY29sSGVpZ2h0QXJyW21pbkhJZHhdICs9IGg7XG4gICAgICBtYXhIID0gTWF0aC5tYXguYXBwbHkobnVsbCwgdGhpcy5jb2xIZWlnaHRBcnIpO1xuICAgICAgaXRlbS5zdHlsZS50b3AgPSBtaW5IICsgJ3B4JztcbiAgICAgIGl0ZW0uc3R5bGUubGVmdCA9IG1pbkhJZHggKiBDT0xfV0lEVEggKyAncHgnO1xuICAgIH1cbiAgICBjb250YWluZXIuc3R5bGUuaGVpZ2h0ID0gbWF4SCArIExPQURfTU9SRV9CVE5fSEVJR0hUICsgMTAgKyAncHgnO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGxldCB7IGltZ0JveFByb3BzQXJyIH0gPSB0aGlzLnN0YXRlO1xuICAgIGxldCBpbWdCb3hBcnIgPSBbXTtcbiAgICBsZXQgcG1zQXJyID0gaW1nQm94UHJvcHNBcnIubWFwKChpdGVtLCBpbmRleCkgPT4ge1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkgeyAvLyDnlKggcHJvbWlzZSDmnaXlsIHoo4Xlm77niYfnmoQgbG9hZFxuICAgICAgICBpbWdCb3hBcnIucHVzaChcbiAgICAgICAgICA8SW1nQm94XG4gICAgICAgICAga2V5PXtpbmRleH1cbiAgICAgICAgICByZWY9eydpbWdCb3gnK2luZGV4fVxuICAgICAgICAgIGNsYXNzTGlzdD17W119XG4gICAgICAgICAgc3JjPXtpdGVtLnNyY31cbiAgICAgICAgICByZXNvbHZlUG1zPXsoZXZlbnQpPT57XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhpdGVtLnNyYyArICcgbG9hZCEnKTtcbiAgICAgICAgICAgIHJlc29sdmUoZXZlbnQudGFyZ2V0KTsgLy8gbG9hZCDlrozmiJDml7YgcmVzb2x2ZSDov5nkuKogZG9tIOacrOi6q1xuICAgICAgICAgIH19XG4gICAgICAgICAgPjwvSW1nQm94PlxuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgcG1zQXJyID0gcG1zQXJyLnNsaWNlKHRoaXMuc2l6ZSk7IC8vIOmZpOWOu+W3suWKoOi9veeahFxuICAgIC8vIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTtcbiAgICB0aGlzLnNldFN0YXRlKHVwZGF0ZSh0aGlzLnN0YXRlLCB7XG4gICAgICBpc0xvYWRpbmc6IHsgJHNldDogdHJ1ZX1cbiAgICB9KSk7XG4gICAgY29uc29sZS5sb2coYEN1cnJlbnQgc2l6ZTogJHt0aGlzLnNpemV9LCB3YWl0aW5nICR7cG1zQXJyLmxlbmd0aH0gcHJvbWlzZXMuLi5gKTtcbiAgICBQcm9taXNlLmFsbChwbXNBcnIpLnRoZW4oKGltZ2JveERPTUFycikgPT4ge1xuICAgICAgdGhpcy53YXRlcmZsb3coaW1nYm94RE9NQXJyKTtcbiAgICAgIGltZ2JveERPTUFyci5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xuICAgICAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ3dhaXRpbmcnKTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5zaXplICs9IGltZ2JveERPTUFyci5sZW5ndGg7XG4gICAgICAvLyB0aGlzLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgdGhpcy5zZXRTdGF0ZSh1cGRhdGUodGhpcy5zdGF0ZSwge1xuICAgICAgICBpc0xvYWRpbmc6IHsgJHNldDogZmFsc2V9XG4gICAgICB9KSk7XG4gICAgICAvLyBhbGVydCgnT0shJyk7XG4gICAgfSlcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9J2ltZy1ib3gtY29udGFpbmVyJyByZWY9J2ltZy1ib3gtY29udGFpbmVyJz5cbiAgICAgICAge2ltZ0JveEFycn1cbiAgICAgICAgPExvYWRNb3JlQnRuXG4gICAgICAgICAgbG9hZE1vcmVJbWdzPXt0aGlzLmdlbkxvYWRNb3JlSW1nc0ZuKCl9XG4gICAgICAgID48L0xvYWRNb3JlQnRuPlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxuXG5cbn1cblxuQXBwQ29tcG9uZW50LmRlZmF1bHRQcm9wcyA9IHtcbn07XG5cblxuZXhwb3J0IGRlZmF1bHQgQXBwQ29tcG9uZW50O1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvY29tcG9uZW50cy9NYWluLmpzXG4gKiovIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ }

})